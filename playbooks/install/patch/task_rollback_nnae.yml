- name: find nnae rollback script
  find:
    paths: "{{ ascend_install_path }}/nnae/latest/spc/script/"
    recurse: no
    file_type: file
    use_regex: yes
    patterns: "roll.*.sh"
  register: nnae

- name: rollback nnae
  shell: "{{ nnae.files[0].path }}"
  register: nnae_result
  when: nnae.matched > 0

- name: message
  debug:
    msg:
      - "can not find nnae rollback script,nnae rollback skipped"
  when: nnae.matched == 0

- name: message
  debug:
    msg:
      - "{{ nnae_result | default('NOT DEFINED') }}"
  when: nnae_result.changed