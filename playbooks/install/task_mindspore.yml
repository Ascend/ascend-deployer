- name: install mindspore_ascend
  shell: python3 -m pip install mindspore_ascend --no-index --find-links {{ resources_dir }}/pylibs {{ pip_install_option }}
  environment:
    PATH: "{{ local_path }}/{{ python_version }}/bin:{{ ansible_env.PATH }}"
    LD_LIBRARY_PATH: "{{ local_path }}/{{ python_version }}/lib:{{ local_path }}/gcc7.3.0/lib64:{{ local_path }}/gcc8.4.0/lib64"
  when: ansible_local.npu_info.model_number == "3000" or ansible_local.npu_info.model_number == "3010" or ansible_local.npu_info.model_number == "9000" or ansible_local.npu_info.model_number == "9010"

- name: install mindspore_cpu
  shell: python3 -m pip install mindspore --no-index --find-links {{ resources_dir }}/pylibs {{ pip_install_option }}
  environment:
    PATH: "{{ local_path }}/{{ python_version }}/bin:{{ ansible_env.PATH }}"
    LD_LIBRARY_PATH: "{{ local_path }}/{{ python_version }}/lib:{{ local_path }}/gcc7.3.0/lib64"
  when:
    - ansible_local.npu_info.model_number != "9000"
    - ansible_local.npu_info.model_number != "9010"
    - ansible_local.npu_info.model_number != "3000"
    - ansible_local.npu_info.model_number != "3010"
